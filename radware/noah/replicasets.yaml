
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: frontend
  labels:
    app: spring
    tier: frontend
spec:
  replicas: 3
  selector:  
    matchLabels:
      tier: frontend
  template:   
    metadata:
      labels:
        tier: frontend
    spec:
        containers:
        - name: nginx
          image: nginx:1.7.9
          ports:
          - containerPort: 80
          volumeMounts:
          - name:  app-storage
            mountPath:  /storage
        - name: springapp
          image: yanivomc/spring-music:latest
          ports:
          - containerPort: 8080
          volumeMounts:
          - name:  app-storage
            mountPath:  /storage
        volumes:
        - hostPath:
            path: /tmp/files
            type: DirectoryOrCreate
          name: app-storage
            